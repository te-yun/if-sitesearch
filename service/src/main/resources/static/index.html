<!DOCTYPE html>
<!--
  ~ Copyright 2017 IntraFind Software AG. All rights reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<html lang="en">
<meta charset="utf-8"/>
<meta name="description"
      content="Simple Site Search from the makers of the enterprise search vendor IntraFind Software AG.">
<title>Simple Site Search</title>
<link rel="stylesheet" type="text/css" href="https://api.sitesearch.cloud/searchbar/css/app.css"/>
<link rel="stylesheet" type="text/css" href="https://api.sitesearch.cloud/theme/font/css/font-awesome.min.css"/>
<script src="/app/runtime/kotlin.js"></script>
<script src="/app/client/client.js"></script>

<body onload="client.com.intrafind.sitesearch.client.showAuthentication()">
<h1 style="font-size: 2em;"><span class="fa fa-search"></span> Simple Site Search<sup>BETA</sup></h1>
<img src="/theme/logo.png" width="361" height="105" style="float: right;">

<br>
<!--<span id="user" class="fa fa-sign-in"></span>-->
<a id="loginLink" href="/login" style="text-decoration: none;"
   class="fa fa-sign-in" aria-hidden="true"> Login</a>
<br>
<br>
<style>
    input {
        width: 280px;
    }
</style>
<div id="assignmentController" style="display: none;">
    <a href="/admin.html">Sites</a>
    <a href="/sitesearch-gadget.html">Establish Site Assignment</a>
    // TODO add admin.html link, move below to admin.html
    <label for="siteId">Site ID</label>
    <br>
    <input id="siteId" type="text" value="1f53b4af-33b4-4db5-afa1-cc9654057591" placeholder="Site Id"/>
    <br>
    <label for="siteSecret">Site Secret</label>
    <br>
    <input id="siteSecret" type="text" value="2b7baeba-f4d1-4ed0-bd6c-c8b5897c72c7" placeholder="Site Secret"/>
    <br>
    <label for="siteName">Site Name</label>
    <br>
    <input id="siteName" type="text" value="Main" placeholder="Site Name"/>
    <br>
    <label for="contactEmail">Contact E-mail</label>
    <br>
    <input id="contactEmail" type="email" value="" placeholder="Contact e-mail"/>
    <br>
    <label for="company">Company</label>
    <br>
    <input id="company" type="text" value="" placeholder="Company Name"/>
    <br>
    <br>
    <input type="button"
           id="assignSite"
           style="text-align: center; width: 285px;"
           onclick="client.com.intrafind.sitesearch.client.assignSite()"
           value="Assign Site">
</div>

<br>
<br>

<div id="assignmentsContainer" style="display: none;">
    <dl>
        <dt id="companyName"></dt>
        <dd id="companyContact"></dd>
    </dl>

    <table>
        <thead>
        <tr>
            <td>Site Name</td>
            <td>Site ID</td>
            <td>Site Secret</td>
        </tr>
        </thead>
        <tbody id="assignments">
        </tbody>
    </table>
</div>

<br>
<hr>
<ul style="list-style: none; font-size: 1.5em;">
    <li><a class="fa fa-book" href="/swagger-ui.html" style="text-decoration: none;">
        API specification &amp; playground</a></li>
    <li><a class="fa fa-cog" href="sitesearch-gadget.html"
           style="text-decoration: none;">
        Getting started gadget</a></li>
    <li><a class="fa fa-cogs" href="https://doc.sitesearch.cloud/FAQ" style="text-decoration: none;">
        FAQ</a></li>
</ul>

<style>
    .if-teaser-highlight {
        font-weight: bold;
    }
</style>

<div class="container" style="margin-top:130px; width: 530px;">
    <div id="searchbar"></div>
    <div id="resultlist" style="margin-top:20px;"></div>
</div>

<script src="https://api.sitesearch.cloud/searchbar/js/app.js"></script>
<script>
    jQuery.noConflict();
    jQuery(document).ready(function ($) {
        IFS.initClient({
            sbTarget: "#searchbar",
            configurl: "searchbar-config/sitesearch-config.json",
            sitesearch: true,
            siteId: "363d50f3-17cb-4756-aeca-7d3768092ae1"
        });

        IFS.handlebars.registerHelper("formatHighlightedUrl", function (url) {
            if (typeof url !== "undefined") {
                console.warn(url);
                console.warn(decodeURIComponent(url));
                console.warn(decodeURI(url));
                return decodeURIComponent(url);
            } else {
                return "";
            }
        });
    });
</script>

<div style="float: right">
    <span class="fa fa-user-circle-o"></span> <a href="privacy.html">Privacy</a> | <span class="fa fa-gavel"></span>
    <a href="terms.html">Terms</a> | <span class="fa fa-briefcase"></span> <a href="imprint.html">Imprint</a>
</div>

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-105737954-1', 'auto');
    ga('send', 'pageview');
</script>
